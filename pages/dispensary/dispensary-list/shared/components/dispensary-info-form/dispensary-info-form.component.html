<div class="dispensary-information-form">
  <form [formGroup]="form" novalidate (ngSubmit)="proceed()">
    <div class="card border-0">
      <div class="card-body p-0">
        <div class="dispensary-info">
          <div class="form-header text-left d-flex">
            <div><h1>Dispensary Name &nbsp;</h1></div>
            <div>
              <span
                popover="This the the name of your dispensary, which will be displayed on your pages and how customers can find you. Each dispensary name must be unique. If the name you want is taken, or you have multiple dispensaries with the same name, we suggest the naming convention:  &quot;Name (Location)&quot;"
                placement="auto">
                <i class="fa fa-info-circle"></i>
              </span>
            </div>
          </div>
          <div class="text-center">
            <div class="row">
              <div class="form-group col-md-7" [class.is-invalid]="dispensaryNameInvalid">
                <input class="form-control" name="dispensaryName"
                  placeholder="Dispensary Name"
                  type="text"
                  formControlName="dispensary_name"
                  [class.is-invalid]="dispensaryNameInvalid">
                  <!-- error notifications -->
                  <div class="invalid-feedback" ngxErrors="dispensary_name" #dispensaryNameErrors="ngxErrors">
                    <span ngxError="required" when="touched">Dispensary Name is required</span>
                  </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-7" [class.is-invalid]="address1Invalid">
                <input class="form-control" name="address1"
                  placeholder="Address Line 1"
                  type="text"
                  formControlName="dispensary_address_line_1"
                  [class.is-invalid]="address1Invalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_address_line_1" #address1Errors="ngxErrors">
                  <span ngxError="required" when="touched">Address Line 1 is required</span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="form-group col-md-7">
                <input class="form-control" name="address2"
                  placeholder="Address Line 2"
                  type="text"
                  formControlName="dispensary_address_line_2">
              </div>
            </div>
            <div class="row col-md-7 pr-0">
              <div class="form-group col-md-8 pl-0" [class.is-invalid]="cityInvalid">
                <input class="form-control" name="city"
                  placeholder="City"
                  type="text"
                  formControlName="dispensary_city"
                  [class.is-invalid]="cityInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_city" #cityErrors="ngxErrors">
                  <span ngxError="required" when="touched">City is required</span>
                </div>
              </div>
              <div class="form-group col-md-4 pr-0" [class.is-invalid]="stateInvalid">
                <input  class="form-control" name="state"
                  placeholder="State"
                  type="text"
                  formControlName="dispensary_state"
                  [class.is-invalid]="stateInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_state" #stateErrors="ngxErrors">
                  <span ngxError="required" when="touched">State is required</span>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-7" [class.is-invalid]="zipInvalid">
                <input class="form-control" name="zipCode"
                  placeholder="Zip Code"
                  type="text"
                  formControlName="dispensary_zip"
                  [class.is-invalid]="zipInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_zip" #zipErrors="ngxErrors">
                  <span ngxError="required" when="touched">Zip is required</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="liecense-info">
          <div class="form-header">
            <div class="text-left">
              <h1>License Information &nbsp;</h1>
            </div>
          </div>
          <div class="text-center">
            <div class="row">
              <div class="form-group col-md-7" [class.is-invalid]="licenseNoInvalid">
                <input class="form-control" name="licenseNo"
                  placeholder="License #"
                  type="text"
                  formControlName="dispensary_license_number"
                  [class.is-invalid]="licenseNoInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_license_number" #licenseNoErrors="ngxErrors">
                  <span ngxError="required" when="touched">License Number is required</span>
                </div>
              </div>
              <div class="form-group col-md-5" [class.is-invalid]="licenseStateInvalid">
                <input class="form-control" name="stateIssue"
                  placeholder="State of Issue"
                  type="text"
                  formControlName="dispensary_license_state"
                  [class.is-invalid]="licenseStateInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_license_state" #licenseStateErrors="ngxErrors">
                  <span ngxError="required" when="touched">State of Issue is required</span>
                </div>
              </div>
            </div>
            <div class="row col-md-7 pr-0">
              <div class="form-group col-md-6 pl-0" [class.is-invalid]="licenseDateInvalid">
                <label for="issueDate">Issue Date</label>
                <input class="form-control" name="issueDate"
                  placeholder="Issue Date"
                  type="text"
                  formControlName="dispensary_license_issue_date"
                  bsDatepicker
                  [bsValue]="f.dispensary_license_issue_date.value"
                  [bsConfig]="{ adaptivePosition: true }"
                  [class.is-invalid]="licenseDateInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_license_issue_date" #licenseDateErrors="ngxErrors">
                  <span ngxError="required" when="touched">License Date is required</span>
                </div>
              </div>
              <div class="form-group col-md-6 pr-0" [class.is-invalid]="licenseExpireInvalid">
                <label for="expirationDate">Expiration Date</label>
                <input class="form-control" name="expirationDate"
                  type="text"
                  formControlName="dispensary_license_expiration_date"
                  bsDatepicker
                  placeholder="Expiration date"
                  [bsValue]="f.dispensary_license_issue_date.value"
                  [bsConfig]="{ adaptivePosition: true }"
                  [class.is-invalid]="licenseExpireInvalid">
                <!-- error notifications -->
                <div class="invalid-feedback" ngxErrors="dispensary_license_expiration_date" #licenseExpireErrors="ngxErrors">
                  <span ngxError="required" when="touched">License Expiration is required</span>
                </div>
              </div>
            </div>

            <div class="row px-5">
              <div class="form-group col-md-10">
                <div class="d-flex " (click)="licenseFile.click()">
                  <i class="fa fa-upload"></i>
                  <label for="issueDate">&nbsp; Upload License</label>
                </div>
                <input class="form-control" hidden name="licenseFile" #licenseFile
                  type="file"
                  ng2FileSelect
                  [attr.accept]="allowedMimeTypes"
                  [uploader]="uploader"
                  (onFileSelected)="onLicenseUpload($event)">

                <div class="text-left w-100">
                  <p class="text-muted" *ngIf="!!fileName">
                    <span class="pr-2">
                      <i class="fa fa-paperclip"></i>
                    </span>
                    <span>{{ fileName }}</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-pill" [disabled]="form.invalid">Next</button>
        <button class="btn transparent" (click)="onCancel()">Cancel</button>
      </div>
    </div>
  </form>
</div>
